(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{102:function(e,t,s){},104:function(e,t,s){},110:function(e,t,s){},132:function(e){e.exports=JSON.parse('[{"songNum":83377,"title":"\ub9cc\uc57d\uc5d0 (\ub4dc\ub77c\ub9c8\\"\ucf8c\ub3c4 \ud64d\uae38\ub3d9\\")","artist":"\ud0dc\uc5f0(\uc18c\ub140\uc2dc\ub300)","year":2008,"genre":"Ballad","id":"1BHLy0efFQ8FFxyxgJtTMf"},{"songNum":21022,"title":"\ud754\ub4e4\ub9ac\ub294 \uaf43\ub4e4 \uc18d\uc5d0\uc11c \ub124 \uc0f4\ud478 \ud5a5\uc774 \ub290\uaef4\uc9c4 \uac70\uc57c","artist":"\uc7a5\ubc94\uc900","year":2019,"genre":"Ballad","id":"2skS61BQztE5bUpqJnBJAx"},{"songNum":4772,"title":"\ucde8\uc911\uc9c4\ub2f4","artist":"\uc804\ub78c\ud68c","year":1996,"genre":"Ballad","id":"39FFkPyRLQtYBJkgV6ETAw"},{"songNum":90515,"title":"\uc2dc\ucc28(We Are)(Feat. \ub85c\uaf2c,\uadf8\ub808\uc774(GRAY))","artist":"\uc6b0\uc6d0\uc7ac","year":2017,"genre":"Hiphop","id":"2SMq0lOqCTHayWa9juoI0d"},{"songNum":91954,"title":"IndiGO","artist":"Justhis,Kid Milli,NO:EL(\uc7a5\uc6a9\uc900),Young B","year":2018,"genre":"Hiphop","id":"5oxmx6B0kWTuCKgBzv8NpH"},{"songNum":47889,"title":"\ubcf4\uc5ec \uc904\uac8c","artist":"\uc5d0\uc77c\ub9ac","year":2012,"genre":"Dance","id":"2MYfUH4Zo7gphaxmMVDrie"},{"songNum":47459,"title":"Ugly","artist":"2NE1(\ud22c\uc560\ub2c8\uc6d0)","year":2011,"genre":"Dance","id":"5FahFQNnmxqiWzJbDNmeIY"},{"songNum":21998,"title":"\ub2e4\uc2dc \uc5ec\uae30 \ubc14\ub2f7\uac00","artist":"\uc2f9\uc4f0\ub9ac","year":2020,"genre":"Dance","id":"4L1MHK27ifT30Ndicpr7js"},{"songNum":48246,"title":"\uc2a4\ubb3c\ub2e4\uc12f, \uc2a4\ubb3c\ud558\ub098","artist":"\uc790\uc6b0\ub9bc","year":2013,"genre":"Rock","id":"3mQwOUjViw1cpwUYugndPV"},{"songNum":45877,"title":"\ube44\ubc00\ubc88\ud638486","artist":"\uc724\ud558","year":2007,"genre":"Rock","id":"4UJFboVdkS4JvnCG5CjipR"}]')},182:function(e,t,s){},184:function(e,t,s){},185:function(e,t,s){},186:function(e,t,s){},190:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(21),c=s.n(n),o=s(134),r=s.n(o),l=s(42),h=s(24),d=s(33),j=s(34),u=s(36),b=s(35),p=s(195),g=s(57),m=(s(102),s(109)),O=s.p+"static/media/vocali_logo2.dce5e0c5.svg",x=(s(110),s(3)),f=Object(h.withRouter)((function(e){var t=e.history,s=e.back;return"none"===s?Object(x.jsx)("div",{className:"navbar",children:Object(x.jsx)("div",{onClick:function(){return t.push("/")},children:Object(x.jsx)("img",{className:"logo",src:O,alt:"Vocali Logo"})})}):Object(x.jsxs)("div",{className:"navbar",children:[Object(x.jsx)("div",{onClick:function(){return t.push(s)},children:Object(x.jsx)(m.a,{className:"return-button"})}),Object(x.jsx)("div",{onClick:function(){return t.push("/")},children:Object(x.jsx)("img",{className:"logo",src:O,alt:"Vocali Logo"})})]})})),v=s(124),y=s.n(v).a.create({baseURL:"https://lit-eyrie-97447.herokuapp.com",headers:{"Content-type":"application/json"}}),N=function(e){return y.get("/users/".concat(e))},k=function(e,t){return y.post("/users",{name:e,age:1*t})},C=function(e,t){return y.put("/users/".concat(e),t)},S=function(e,t,s){var a=[];t.map((function(e){return a.push({id:e.id,category:s})}));var i=JSON.stringify(a);return console.log(i),y.post("/users/".concat(e,"/songs/select"),i,{headers:{"Content-Type":"application/json"}})},M=p.a.Paragraph,w=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(j.a)(s,[{key:"nextPath",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){var e=this;return N(1),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f,{history:this.props.history,back:"none"}),Object(x.jsxs)("div",{className:"row-flex-container",children:[Object(x.jsx)(M,{children:Object(x.jsxs)("div",{className:"slogan",children:["Vocali will find you a"," ",Object(x.jsx)("span",{className:"highlight",children:"perfect song to sing at Noraebang"})]})}),Object(x.jsx)(g.a,{className:"start-button circle",onClick:function(){return e.nextPath("/info")},type:"primary",children:"START"}),Object(x.jsxs)("div",{className:"recommendation-slogan",children:["This site is optimized for mobile environments. ",Object(x.jsx)("br",{}),"We recommend using the Chrome browser."]})]})]})}}]),s}(i.a.Component),P=Object(h.withRouter)(w),F=s(196),A=s(192),W=s(198),R=s(203),B=s(28),I=p.a.Paragraph,E=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(){var e;Object(d.a)(this,s);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={name:"",age:"",modal:!1,loading:!1},e.handleNameChange=function(t){e.setState({name:t.target.value})},e.handleAgeChange=function(t){e.setState({age:t.target.value})},e.handleModalChange=function(){e.setState({modal:!e.state.modal})},e.setInfo=function(){var t=e.state.name,s=e.state.age;""===t||""===s||isNaN(s)?e.handleModalChange():(e.setState({loading:!0}),k(t,s).then((function(t){var s=t.data.id,a=new B.a;a.set("id",s,{path:"/"}),a.remove("mood",{path:"/"}),a.remove("people",{path:"/"}),e.setState({loading:!1}),e.props.history.push("/pitch")})))},e}return Object(j.a)(s,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f,{history:this.props.history,back:"none"}),Object(x.jsxs)(I,{className:"description",children:["First,",Object(x.jsx)("br",{})," Put in your information"]}),Object(x.jsxs)("div",{className:"inputs",children:[Object(x.jsxs)("div",{className:"input-div",children:[Object(x.jsx)("div",{className:"subtitle",children:"Name"}),Object(x.jsx)(F.a,{className:"name-input",size:"large",placeholder:"ex. Gildong",prefix:Object(x.jsx)(R.a,{}),onChange:this.handleNameChange})]}),Object(x.jsxs)("div",{className:"input-div",children:[Object(x.jsx)("div",{className:"subtitle",children:"Age"}),Object(x.jsx)(F.a,{className:"age-input",size:"large",placeholder:"ex. 27",onChange:this.handleAgeChange})]})]}),Object(x.jsx)(A.a,{className:"loading-next",spinning:this.state.loading,delay:500}),Object(x.jsx)(g.a,{className:"next-button",onClick:this.setInfo,type:"primary",children:"NEXT"}),Object(x.jsx)(W.a,{title:"Warning",visible:this.state.modal,onOk:this.handleModalChange,footer:[Object(x.jsx)(g.a,{type:"primary",onClick:this.handleModalChange,children:"OK"},"ok")],children:Object(x.jsx)("p",{children:"You should fill out your name and age. Also your age should be valid number :)"})})]})}}]),s}(i.a.Component),L=Object(h.withRouter)(E),T=s(136),H=s(202),D=s(194),J=s(204),V=s(132),Y=p.a.Paragraph,q=H.a.CheckableTag,G=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(){var e;Object(d.a)(this,s);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={selectedSongs:[]},e}return Object(j.a)(s,[{key:"handleSongPref",value:function(e,t){var s=this.state.selectedSongs,a=t?[].concat(Object(T.a)(s),[e]):s.filter((function(t){return t!==e}));console.log("You are interested in: ",a),this.setState({selectedSongs:a})}},{key:"onNextClick",value:function(e){console.log(e);var t=(new B.a).get("id",{path:"/"});S(t,e,"like"),this.props.history.push("/home")}},{key:"render",value:function(){var e=this,t=this.state.selectedSongs;return Object(x.jsxs)("div",{children:[Object(x.jsx)(f,{history:this.props.history,back:"/pitch"}),Object(x.jsxs)(Y,{className:"description",children:["Next,",Object(x.jsx)("br",{}),"Check all the songs you would sing at Noraebang!"]}),Object(x.jsx)("div",{className:"song-pref-div",children:V.map((function(s){return Object(x.jsx)(D.a,{size:"small",className:"song-pref-card",title:s.title,extra:Object(x.jsx)(q,{checked:t.indexOf(s)>-1,onChange:function(t){return e.handleSongPref(s,t)},children:Object(x.jsx)(J.a,{})},s.songNum),children:Object(x.jsx)("p",{children:s.artist})})}))}),Object(x.jsx)(g.a,{className:"next-button",onClick:function(){return e.onNextClick(e.state.selectedSongs)},type:"primary",children:"NEXT"})]})}}]),s}(i.a.Component),K=Object(h.withRouter)(G),z=s(43),U=s(107),Q=s.n(U),X=s(193),Z=(s(182),p.a.Paragraph),_=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).state={record:!1,disabled:!0,currentPitch:"None",minPitch:[1e4,"None"],maxPitch:[0,"None"]},a.handleRecordChange=function(){a.setState({record:!a.state.record}),a.state.record?a.stopPitch():a.getPitch()},a.bool2str=function(e){return e?"Stop":"Record"},a.getPitch=a.getPitch.bind(Object(z.a)(a)),a.logPitch=a.logPitch.bind(Object(z.a)(a)),a.stopPitch=a.stopPitch.bind(Object(z.a)(a)),a.handleRecordChange=a.handleRecordChange.bind(Object(z.a)(a)),a.onNextClick=a.onNextClick.bind(Object(z.a)(a)),a}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.voice=new Q.a({source:"mic"}),this.tuner=new Q.a.Poly}},{key:"nextPath",value:function(e){this.props.history.push(e)}},{key:"getPitch",value:function(){this.tuner.setVolume(0),this.tuner.add(this.voice),this.voice.play(),this.tuner.updatePitch(),this.logPitch()}},{key:"logPitch",value:function(){console.log(this.tuner.pitch,this.tuner.noteName),this.tuner.noteName&&(console.log(this.state.minPitch[0]),this.state.disabled&&this.setState({disabled:!1}),this.tuner.pitch>this.state.maxPitch[0]&&(this.maxPitch=this.tuner.pitch,this.setState({maxPitch:[this.tuner.pitch,this.tuner.noteName]})),this.tuner.pitch<this.state.minPitch[0]&&(this.minPitch=this.tuner.pitch,this.setState({minPitch:[this.tuner.pitch,this.tuner.noteName]})),this.setState({currentPitch:this.tuner.noteName})),this.animation=requestAnimationFrame(this.logPitch)}},{key:"stopPitch",value:function(){this.tuner.stopUpdatingPitch(),cancelAnimationFrame(this.animation),this.voice.stop(),this.tuner.stop()}},{key:"onNextClick",value:function(){var e=this,t=(new B.a).get("id",{path:"/"}),s={minPitch:this.state.minPitch[1],maxPitch:this.state.maxPitch[1]};C(t,s).then((function(t){e.nextPath("/songpref")}))}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f,{history:this.props.history,back:"/info"}),Object(x.jsx)(Z,{className:"description",children:"Sing from your lowest possible note to your highest possible note"}),Object(x.jsxs)("div",{className:"pitches",children:[Object(x.jsxs)("div",{className:"currentpitches",children:["Current Pitch",Object(x.jsx)("div",{className:"pitchDisplay",children:this.state.currentPitch})]}),Object(x.jsx)(X.a,{}),Object(x.jsxs)("div",{className:"maxminpitches",children:[Object(x.jsxs)("div",{children:["Min Pitch",Object(x.jsx)("div",{className:"pitchDisplay",children:this.state.minPitch[1]})]}),Object(x.jsxs)("div",{children:["Max Pitch",Object(x.jsx)("div",{className:"pitchDisplay",children:this.state.maxPitch[1]})]})]})]}),Object(x.jsxs)("div",{className:"pitch-buttons",children:[Object(x.jsx)(g.a,{className:"record-button",type:"primary",onClick:this.handleRecordChange,children:this.bool2str(this.state.record)}),Object(x.jsx)(g.a,{className:"stop-button",type:"primary",disabled:this.state.disabled||this.state.record,onClick:this.onNextClick,children:"NEXT"})]})]})}}]),s}(i.a.Component),$=Object(h.withRouter)(_),ee=s(199),te=(s(104),s(52)),se=s(200),ae=ee.a.Header,ie=Object(h.withRouter)((function(e){var t=e.history,s=e.people,i=e.mood,n=Object(a.useState)(s),c=Object(te.a)(n,2),o=c[0],r=c[1],l=Object(a.useState)(i),h=Object(te.a)(l,2),d=h[0],j=h[1],u=Object(a.useState)("-"),b=Object(te.a)(u,2),p=b[0],g=b[1],m=Object(a.useState)("-"),f=Object(te.a)(m,2),v=f[0],y=f[1],k=Object(a.useState)("-"),C=Object(te.a)(k,2),S=C[0],M=C[1],w=new B.a;return Object(a.useEffect)((function(){var e=w.get("id",{path:"/"});N(e).then((function(e){y(e.data.age),g(e.data.name),M(e.data.minPitch+" - "+e.data.maxPitch)}))}),[]),Object(a.useEffect)((function(){s&&i?(r(s),j(i)):(j(w.get("mood",{path:"/"})),r(w.get("people",{path:"/"})))}),[w,i,s]),Object(x.jsxs)(ae,{className:"header",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{onClick:function(){return t.push("/home")},style:{lineHeight:0},children:Object(x.jsx)("img",{className:"logo-left",src:O,alt:"Vocali Logo"})}),Object(x.jsxs)("div",{className:"user-info",children:[Object(x.jsx)(se.a,{className:"avatar",style:{backgroundColor:"#D9D9D9"},children:p.slice(0,1)}),Object(x.jsx)(H.a,{className:"age-info",children:v}),Object(x.jsx)(H.a,{className:"pitch-info",children:S})]})]}),Object(x.jsxs)("div",{className:"mood-dashboard",children:[Object(x.jsx)("p",{className:"mood-title",children:"Today's Mood"}),Object(x.jsxs)("div",{className:"mood-info-div",children:[Object(x.jsx)(H.a,{className:"whom-info",children:o}),Object(x.jsx)(H.a,{className:"mood-info",children:d})]})]})]})})),ne=ee.a.Content,ce=H.a.CheckableTag,oe=["Alone","Together"],re=["Happy","Energetic","Depression","Calm"],le=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).handleModalChange=function(){a.setState({showModal:!a.state.showModal})},a.handleFindButtonClick=function(){var e=a.state.selectedMood,t=a.state.selectedPeople;""!==e&&""!==t?a.props.history.push("/result?people="+t+"&mood="+e):a.handleModalChange()},a.cookies=new B.a,a.state={selectedPeople:"",selectedMood:"",showModal:!1},a.nextPath=a.nextPath.bind(Object(z.a)(a)),a}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var e=this.cookies.get("people",{path:"/"});e&&this.setState({selectedPeople:e});var t=this.cookies.get("mood",{path:"/"});t&&this.setState({selectedMood:t})}},{key:"nextPath",value:function(e){this.props.history.push(e)}},{key:"handlePeopleChange",value:function(e,t){var s=t?e:"";this.setState({selectedPeople:s}),this.cookies.set("people",s,{path:"/"})}},{key:"handleMoodChange",value:function(e,t){var s=t?e:"";this.setState({selectedMood:s}),this.cookies.set("mood",s,{path:"/"})}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(ee.a,{className:"layout",children:[Object(x.jsx)(ie,{history:this.props.history,people:this.state.selectedPeople,mood:this.state.selectedMood}),Object(x.jsxs)(ne,{style:{backgroundColor:"#ffffff"},children:[Object(x.jsxs)("div",{className:"selection-board",children:[Object(x.jsx)("div",{className:"mood-selection",children:Object(x.jsxs)("p",{className:"select-title",children:["Select",Object(x.jsx)("br",{}),"Today's Mood"]})}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"question",children:"With Whom?"}),Object(x.jsx)("div",{className:"checkable-tag-div",children:oe.map((function(t){return Object(x.jsx)(ce,{className:"checkable-tags",checked:e.state.selectedPeople===t,onChange:function(s){return e.handlePeopleChange(t,s)},children:t},t)}))}),Object(x.jsx)(X.a,{}),Object(x.jsx)("div",{className:"question",children:"What type of mood are you feeling today?"}),Object(x.jsx)("div",{className:"checkable-tag-div",children:re.map((function(t){return Object(x.jsx)(ce,{className:"checkable-tags",checked:e.state.selectedMood===t,onChange:function(s){return e.handleMoodChange(t,s)},children:t},t)}))})]}),Object(x.jsx)(g.a,{className:"find-button standard",onClick:this.handleFindButtonClick,type:"primary",children:"FIND SONG"})]}),Object(x.jsx)(W.a,{title:"Warning",visible:this.state.showModal,onOk:this.handleModalChange,footer:[Object(x.jsx)(g.a,{type:"primary",onClick:this.handleModalChange,children:"OK"},"ok")],children:Object(x.jsx)("p",{children:"You should select one tag from each category :)"})})]})}}]),s}(i.a.Component),he=Object(h.withRouter)(le),de=s(133),je=s.n(de),ue=s(197),be=s(201),pe=s(207),ge=s(208),me=s(209),Oe=(s(184),s(205)),xe=s(206),fe=(s(185),ee.a.Footer),ve=Object(h.withRouter)((function(e){var t=e.history,s=Object(a.useState)(""),i=Object(te.a)(s,2),n=i[0],c=i[1],o=Object(a.useState)(""),r=Object(te.a)(o,2),l=r[0],h=r[1];return Object(a.useEffect)((function(){var e=new B.a;h(e.get("mood",{path:"/"})),c(e.get("people",{path:"/"}))}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{style:{height:"100px",backgroundColor:"#f6f0fe"}}),Object(x.jsx)(fe,{className:"vocali-footer",children:Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsxs)("div",{onClick:function(){return t.push("/home")},className:"footer-button",children:[Object(x.jsx)(Oe.a,{className:"footer-button-icon"}),Object(x.jsx)("span",{children:"Mood"})]}),Object(x.jsx)(X.a,{type:"vertical"}),Object(x.jsxs)("div",{onClick:function(){return t.push("/result?people="+n+"&mood="+l)},className:"footer-button",children:[Object(x.jsx)(xe.a,{className:"footer-button-icon"}),Object(x.jsx)("span",{children:"Result"})]}),Object(x.jsx)(X.a,{type:"vertical"}),Object(x.jsxs)("div",{onClick:function(){return t.push("/likelist")},className:"footer-button",children:[Object(x.jsx)(J.a,{className:"footer-button-icon"}),Object(x.jsx)("span",{children:"Like List"})]})]})})]})})),ye=ee.a.Content,Ne=D.a.Meta,ke=H.a.CheckableTag,Ce=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).userActions=[{name:"dislike",displayName:Object(x.jsxs)("p",{className:"feedback-tag-description",children:["I don't ",Object(x.jsx)("br",{}),"like it"]}),icon:Object(x.jsx)(pe.a,{className:"feedback-tag-icon"})},{name:"noclue",displayName:Object(x.jsxs)("p",{className:"feedback-tag-description",children:["I have ",Object(x.jsx)("br",{}),"no clue"]}),icon:Object(x.jsx)(ge.a,{className:"feedback-tag-icon"})},{name:"like",displayName:Object(x.jsxs)("p",{className:"feedback-tag-description",children:["Show more ",Object(x.jsx)("br",{}),"like this!"]}),icon:Object(x.jsx)(J.a,{className:"feedback-tag-icon"})}],a.handleExplainModalChange=function(){a.setState({explainModal:!a.state.explainModal})},a.handleAdjustModalChange=function(){if(a.state.adjustModal){var e=(new B.a).get("id",{path:"/"}),t={moodWeight:parseFloat(a.state.moodWeight),prefWeight:parseFloat(a.state.prefWeight),pitchWeight:parseFloat(a.state.pitchWeight)};C(e,t).then((function(){return a.props.history.push("/result?people="+a.state.selectedPeople+"&mood="+a.state.selectedMood)}))}a.setState({adjustModal:!a.state.adjustModal})},a.onChangeMood=function(e){a.setState({moodWeight:e.target.value},(function(){return a.checkAdjustAvailability()}))},a.onChangePitch=function(e){a.setState({pitchWeight:e.target.value},(function(){return a.checkAdjustAvailability()}))},a.onChangeSongPref=function(e){a.setState({prefWeight:e.target.value},(function(){return a.checkAdjustAvailability()}))},a.state={songList:[{songNum:83377,title:'\ub9cc\uc57d\uc5d0 (\ub4dc\ub77c\ub9c8"\ucf8c\ub3c4 \ud64d\uae38\ub3d9")',artist:"\ud0dc\uc5f0(\uc18c\ub140\uc2dc\ub300)",year:2008,genre:"Ballad",id:"1BHLy0efFQ8FFxyxgJtTMf"},{songNum:21022,title:"\ud754\ub4e4\ub9ac\ub294 \uaf43\ub4e4 \uc18d\uc5d0\uc11c \ub124 \uc0f4\ud478 \ud5a5\uc774 \ub290\uaef4\uc9c4 \uac70\uc57c",artist:"\uc7a5\ubc94\uc900",year:2019,genre:"Ballad",id:"2skS61BQztE5bUpqJnBJAx"},{songNum:4772,title:"\ucde8\uc911\uc9c4\ub2f4",artist:"\uc804\ub78c\ud68c",year:1996,genre:"Ballad",id:"39FFkPyRLQtYBJkgV6ETAw"},{songNum:90515,title:"\uc2dc\ucc28(We Are)(Feat. \ub85c\uaf2c,\uadf8\ub808\uc774(GRAY))",artist:"\uc6b0\uc6d0\uc7ac",year:2017,genre:"Hiphop",id:"2SMq0lOqCTHayWa9juoI0d"},{songNum:91954,title:"IndiGO",artist:"Justhis,Kid Milli,NO:EL(\uc7a5\uc6a9\uc900),Young B",year:2018,genre:"Hiphop",id:"5oxmx6B0kWTuCKgBzv8NpH"}],currSongIndex:0,feedbacks:new Map,loading:!0,adjustModal:!1,explainModal:!1,selectedFeedback:"",moodWeight:"0.5",pitchWeight:"0.5",prefWeight:"0.5",selectedMood:"",selectedPeople:"",adjustAvailable:!0,userId:""},a.checkAdjustAvailability=a.checkAdjustAvailability.bind(Object(z.a)(a)),a}return Object(j.a)(s,[{key:"loadSongFromModel",value:function(){var e,t,s,a=this;console.log(this.state.userId),(e=this.state.userId,t=this.state.selectedMood.toLowerCase()+","+this.state.selectedPeople.toLowerCase(),s=5,y.get("/users/".concat(e,"/recommendations?moods=").concat(t,"&per=").concat(s))).then((function(e){console.log(e.data),a.setState({songList:e.data,currSongIndex:0})})).then((function(){a.setState({loading:!1})}))}},{key:"handleSelectedFeedback",value:function(e,t,s){t&&this.setState({feedbacks:this.state.feedbacks.set(s.id,e)}),S(this.state.userId,[s],e),console.log(this.state.feedbacks),this.state.currSongIndex<4?this.setState({currSongIndex:this.state.currSongIndex+1}):(console.log("end!"),this.setState({loading:!0}),this.loadSongFromModel())}},{key:"checkAdjustAvailability",value:function(){console.log(this.state.adjustAvailable),console.log(this.state.moodWeight),console.log(this.state.pitchWeight),console.log(this.state.prefWeight),this.state.adjustAvailable&&"0"===this.state.moodWeight&&"0"===this.state.pitchWeight&&"0"===this.state.prefWeight?this.setState({adjustAvailable:!1}):this.state.adjustAvailable||"0"===this.state.moodWeight&&"0"===this.state.pitchWeight&&"0"===this.state.prefWeight||this.setState({adjustAvailable:!0})}},{key:"componentDidMount",value:function(){var e=this,t=je.a.parse(this.props.location.search),s=(new B.a).get("id",{path:"/"});this.setState({userId:s,selectedMood:t.mood,selectedPeople:t.people},(function(){return e.loadSongFromModel()})),N(s).then((function(t){e.setState({moodWeight:t.data.moodWeight.toString()}),e.setState({pitchWeight:t.data.pitchWeight.toString()}),e.setState({prefWeight:t.data.prefWeight.toString()})}))}},{key:"pitchTags",value:function(e){return e>.4?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(H.a,{color:"#6200ee",children:"Easy"})," ",Object(x.jsx)(H.a,{children:"Normal"})," ",Object(x.jsx)(H.a,{children:"Hard"})]}):e>.2?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(H.a,{children:"Easy"})," ",Object(x.jsx)(H.a,{color:"#6200ee",children:"Normal"})," ",Object(x.jsx)(H.a,{children:"Hard"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(H.a,{children:"Easy"})," ",Object(x.jsx)(H.a,{children:"Normal"})," ",Object(x.jsx)(H.a,{color:"#6200ee",children:"Hard"})]})}},{key:"adjustModalFooter",value:function(e){return e?[Object(x.jsx)(g.a,{type:"primary",onClick:this.handleAdjustModalChange,children:"CONFIRM"},"weight-control-confirm")]:[Object(x.jsx)(me.a,{className:"warning-icon"}),Object(x.jsxs)("div",{className:"warning",children:["Make sure you select at least",Object(x.jsx)("br",{}),"one factor to affect the result"]}),Object(x.jsx)(g.a,{type:"primary",onClick:this.handleAdjustModalChange,disabled:!0,children:"CONFIRM"},"weight-control-confirm")]}},{key:"render",value:function(){var e=this,t=this.state.songList[this.state.currSongIndex];return Object(x.jsxs)("div",{style:{backgroundColor:"#F6F0FE"},children:[Object(x.jsx)(ie,{history:this.props.history}),Object(x.jsxs)(ye,{className:"result-contents",children:[Object(x.jsx)("p",{className:"result-description",children:"Vocali found the best song for you!"}),Object(x.jsxs)("p",{className:"result-description-small",children:["If you leave feedback on the recommended song, ",Object(x.jsx)("br",{}),"we will recommend a new song."]}),Object(x.jsx)(D.a,{className:"song-info",title:"Song No. ".concat(t.songNum),extra:Object(x.jsx)(g.a,{type:"link",onClick:this.handleExplainModalChange,style:{padding:"0"},children:"Why this song?"}),actions:this.userActions.map((function(s){return Object(x.jsxs)(ke,{checked:e.state.feedbacks.get(t.id)===s.name,onChange:function(a){return e.handleSelectedFeedback(s.name,a,t)},style:{width:"80%",padding:"5px",margin:"0"},children:[s.icon,s.displayName]},s.name)})),children:Object(x.jsx)(ue.a,{loading:this.state.loading,active:!0,children:Object(x.jsx)(Ne,{className:"card-skeleton",title:t.title,description:t.artist})})}),Object(x.jsx)("p",{className:"result-description-small",children:"Keep getting unsatisfactory results?"}),Object(x.jsx)(g.a,{className:"adjust-button",type:"primary",onClick:this.handleAdjustModalChange,children:"Adjust factor importance"}),Object(x.jsxs)(W.a,{title:"Adjust factor importance",visible:this.state.adjustModal,onCancel:this.handleAdjustModalChange,footer:this.adjustModalFooter(this.state.adjustAvailable),children:[Object(x.jsx)("p",{children:"You can change how much each factor influences the recommendation"}),Object(x.jsxs)("div",{className:"weight-control-slider",children:[Object(x.jsx)("p",{className:"weight-slider-title",children:"Mood"}),Object(x.jsx)("p",{className:"weight-slider-description",children:"How much your mood factors into recommendations"}),Object(x.jsxs)(be.a.Group,{className:"weight-options",defaultValue:this.state.moodWeight,onChange:this.onChangeMood,buttonStyle:"solid",children:[Object(x.jsx)(be.a.Button,{value:"0",children:"None"}),Object(x.jsx)(be.a.Button,{value:"0.5",children:"Moderate"}),Object(x.jsx)(be.a.Button,{value:"1",children:"Strong"})]})]}),Object(x.jsxs)("div",{className:"weight-control-slider",children:[Object(x.jsx)("p",{className:"weight-slider-title",children:"Pitch"}),Object(x.jsx)("p",{className:"weight-slider-description",children:"How much your pitch factors into recommendations"}),Object(x.jsxs)(be.a.Group,{className:"weight-options",defaultValue:this.state.pitchWeight,onChange:this.onChangePitch,buttonStyle:"solid",children:[Object(x.jsx)(be.a.Button,{value:"0",children:"None"}),Object(x.jsx)(be.a.Button,{value:"0.5",children:"Moderate"}),Object(x.jsx)(be.a.Button,{value:"1",children:"Strong"})]})]}),Object(x.jsxs)("div",{className:"weight-control-slider",children:[Object(x.jsx)("p",{className:"weight-slider-title",children:"Song Preference"}),Object(x.jsx)("p",{className:"weight-slider-description",children:"How much your rating history factors into recommendations"}),Object(x.jsxs)(be.a.Group,{className:"weight-options",defaultValue:this.state.prefWeight,onChange:this.onChangeSongPref,buttonStyle:"solid",children:[Object(x.jsx)(be.a.Button,{value:"0",children:"None"}),Object(x.jsx)(be.a.Button,{value:"0.5",children:"Moderate"}),Object(x.jsx)(be.a.Button,{value:"1",children:"Strong"})]})]})]}),Object(x.jsx)(W.a,{title:"Score of this song",visible:this.state.explainModal,onCancel:this.handleExplainModalChange,footer:[Object(x.jsx)(g.a,{type:"primary",onClick:this.handleExplainModalChange,children:"OK"},"weight-control-confirm")],children:Object(x.jsxs)("div",{className:"song-score-info",children:[Object(x.jsxs)("div",{className:"pitch-score-div",children:[Object(x.jsx)("p",{className:"score-title",children:"Pitch"}),Object(x.jsx)("div",{children:this.pitchTags(t.pitchScore)})]}),Object(x.jsxs)("div",{className:"mood-score-div",children:[Object(x.jsx)("p",{className:"score-title",children:"Mood"}),Object(x.jsxs)("div",{children:["This song is ",Object(x.jsxs)("strong",{children:[(100*t.moodScore).toFixed(1),"%"]})," ",this.state.selectedMood]})]}),Object(x.jsxs)("div",{className:"song-score-div",children:[Object(x.jsx)("p",{className:"score-title",children:"Preference"}),Object(x.jsx)("div",{className:"pref-score",children:Object(x.jsxs)("p",{children:[Object(x.jsxs)("strong",{children:[(100*t.prefScore).toFixed(1),"%"]})," match based on ",Object(x.jsx)("br",{}),"users with similar",Object(x.jsx)("br",{}),"music taste as you"]})})]})]})})]}),Object(x.jsx)(ve,{history:this.props.history})]})}}]),s}(i.a.Component),Se=Object(h.withRouter)(Ce),Me=(s(186),D.a.Meta),we=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(){var e;Object(d.a)(this,s);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={songList:[],feedbacks:new Map,loading:!1,modal:!1,drawer:!1,selectedFeedback:""},e}return Object(j.a)(s,[{key:"nextPath",value:function(e){this.props.history.push(e)}},{key:"handleSelectedFeedback",value:function(e,t,s){t&&this.setState({feedbacks:this.state.feedbacks.set(s,e)}),console.log(this.state.feedbacks)}},{key:"handleDelete",value:function(e){this.setState({songList:this.state.songList.filter((function(t){return t.id!==e}))})}},{key:"componentDidMount",value:function(){var e,t=this,s=(new B.a).get("id",{path:"/"}),a=[];(e=s,y.get("/users/".concat(e,"/songs/select"))).then((function(e){e.data.forEach((function(e){"LIKE"===e.category&&e.song&&a.push(e.song)}))})).then((function(){return t.setState({songList:a})}))}},{key:"render",value:function(){var e=this,t=this.state.loading;return console.log(this.state.songList),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ie,{history:this.props.history}),Object(x.jsxs)("div",{className:"like-list-div",children:[this.state.songList.map((function(s){return Object(x.jsx)(D.a,{className:"like-list",title:"Song No. ".concat(s.songNum),extra:Object(x.jsx)(g.a,{type:"link",onClick:function(){return e.handleDelete(s.id)},children:"Delete"}),children:Object(x.jsx)(ue.a,{loading:t,avatar:!0,active:!0,children:Object(x.jsx)(Me,{title:s.title,description:s.artist})})})})),Object(x.jsx)("div",{style:{height:"20px"}})]}),Object(x.jsx)(ve,{history:this.props.history})]})}}]),s}(i.a.Component),Pe=Object(h.withRouter)(we);var Fe=function(){return Object(x.jsx)(l.a,{basename:"/vocali-web",children:Object(x.jsx)("div",{children:Object(x.jsxs)(h.Switch,{children:[Object(x.jsx)(h.Route,{exact:!0,path:"/",component:P}),Object(x.jsx)(h.Route,{exact:!0,path:"/home",component:he}),Object(x.jsx)(h.Route,{path:"/info",component:L}),Object(x.jsx)(h.Route,{path:"/songpref",component:K}),Object(x.jsx)(h.Route,{path:"/pitch",component:$}),Object(x.jsx)(h.Route,{path:"/result",component:Se}),Object(x.jsx)(h.Route,{path:"/likelist",component:Pe})]})})})};c.a.render(Object(x.jsx)(r.a,{basename:"/vocali-web",children:Object(x.jsx)(Fe,{})}),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.2598eaff.chunk.js.map